# Repository Guidelines

## Что это за проект?
- unicex - библиотека для работы с криптовалютными биржами, реализующая унифицированный интерфейс для работы с различными криптовалютными биржами.

## Структура проекта и модули
- `unicex/` — ядро: `abc/` (интерфейсы), `base/` (HTTP/WebSocket), `exchanges/` (`binance/`, `bybit/`); также `enums.py`, `types.py`, `utils.py`, `exceptions.py`.
- `tests/` — исполняемые примеры и ад‑хок скрипты (не формальная тестовая матрица).
- Инструменты: `pyproject.toml` (зависимости), `ruff.toml` (линт/формат), `pyrightconfig.json` (типы), `.pre-commit-config.yaml`.

## Команды сборки, тестов и разработки
- Среда: Python 3.13. Установка: `uv sync`; запуск: `uv run ...`.
- Линт/формат: `uv run ruff format .` и `uv run ruff check --fix .`.
- Типы: `uv run pyright`.
- Примеры: `uv run python tests/binance/uni_client_test.py` (и `tests/bybit/...`).
- Очистка: `make clean-macos-trash-stuff` — удаляет `.DS_Store`.
- pre-commit: `uv run pre-commit install` (рекомендуется).

## Стиль кода и соглашения об именах
- Python, отступ 4 пробела; длина строки ≈100 (см. `ruff.toml`). Импорты сортирует Ruff; docstring — в двойных кавычках.
- Имена: модули `snake_case`; классы `CamelCase` (например, `BaseSyncClient`, `BybitUniClient`); функции/переменные `snake_case`.
- Явные type hints; единообразные публичные API между биржами.
- Локализация: документация функций (docstring) и комментарии — на русском языке.

## Рекомендации по тестированию
- Пока без pytest: файлы в `tests/` — исполняемые примеры. Новые именуйте `tests/<exchange>/<topic>_test.py`.
- Запуск: `uv run python tests/...`. Не коммитьте секреты; по возможности мокайте внешние вызовы.
- При поведенческих изменениях добавляйте минимальный пример «вход→выход».

## Коммиты и Pull Request'ы
- Коммиты: переходите к Conventional Commits, например:
  - `feat(binance): добавить funding_rate в uni client`
  - `fix(bybit): исправить тип количества ордера`
- PR: краткое описание/обоснование, ссылки на issue, команды для воспроизведения, перечисление используемых переменных окружения; обновляйте README при изменении поведения/конфига.

## Безопасность и конфигурация
- Для тестов можно записать в ~/.zshrc: `BINANCE_API_KEY`, `BINANCE_API_SECRET`, `BYBIT_API_KEY`, `BYBIT_API_SECRET`.
- Никогда не коммитьте реальные ключи; избегайте вывода секретов в логи и примеры.

## Обзор архитектуры
- Общие абстракции в `abc/` и `base/`; адаптеры `uni_client` дают унифицированный API; `websocket_manager` обслуживает стримы.


## Стиль докстрингов к функциям:
"""Описание.

Параметры:
 Название параметра (`тип параметра`): Описание параметра

Возвращает (если что-то возвращает):
  `Тип возвращаемого параметра`: Описание возвращаемого параметра.
"""

Если это метод базового клиента (не унифицированного, а обычного), то докстринг становится таким:
"""Описание.

Ссылка на документацию
"""
